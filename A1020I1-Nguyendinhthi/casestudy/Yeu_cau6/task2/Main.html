<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="../task1/customer.js"></script>
    <title>Title</title>
</head>
<body>
<script>
    let regexEmail = /\S+@\S+\.\S+/;
    let regexbirthday = /^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
    let listcustomer = [];
    function dispalayMainMenu() {
        let choose = parseInt(prompt("1.Add new customer" + "\n" + "2.Display information customer" + "\n" + "" +
            "3.Edit infomation customer" + "\n" + "4.Delete customer" + "\n" + "5.Exit"));

        switch (choose) {
            case 1: {
                addnewcustomer();
                break;
            }
                    case 2: {
                       //displaycustomer();
                        break;
                    }
                    case 3: {
                        //editcustomer();
                        break;
                    }
                    case 4: {
                        //deletecustomer();
                        break;
                    }
                    case 5: {
                        break;
                    }
                    default: {
                        alert("faled!")
                    }
                }
    }
    function addnewcustomer() {
        let checkvalid = false;
        let cus = new customner();
            let tempName ="";
            name = prompt("Input name: ");
            name = name.trim().toLowerCase();
            for (let i = 0; i < name.length;i++){
                if (name.charAt(i)===" " && name.charAt(i+1)===" "){
                    continue;
                }
                if (i === 0 || name.charAt(i-1)===" "){
                    tempName += name.charAt(i).toUpperCase();
                    continue;
                }
                tempName += name.charAt(i);
            }
            name = tempName;
         do{
             cmnd = prompt("Input CMND: ");
             if (!isNaN(cmnd)){
                 cmnd = parseFloat(cmnd);
             }
             if (!Number.isInteger(cmnd)){
                 alert("CMND không đúng!");
                 continue;
             }
             if (cmnd <10000000 || cmnd >99999999){
                 alert("CMND không đúng!");
                 continue;
             }
             checkvalid = true;
         }
         while (!checkvalid)
        do {
            let   birthday = prompt("Input birthday:");
            if( regexbirthday.test(birthday)){
                checkvalid = true;
            }else {
                alert("birthday failed");
            }
        }while (!checkvalid)
        checkvalid = false;
        do {
            let  email = prompt("Input Email:");
            if (regexEmail.test(email)){
                checkvalid = true;
            }else {
                alert("email failed");
            }
        }while (!checkvalid)
        checkvalid = false;

        let   address = prompt("input address:");
        let   typeCustomer = prompt("Input typecustomer:");
        let  typeRoom = prompt("input typeroom:");
        let   typeSerice = prompt("input typeserice:");
        let  discount = prompt("input discount:");
        let  quantityIncluded = prompt("input quantityinclued:");
        let numberOfRentalDays = prompt("rentaldays:");


        cus.setName(name);
        cus.setCMND(cmnd);
        cus.setBirthday(birthday);
        cus.setEmail(email);
        cus.setAddress(address);
        cus.setTypeCustomer(typeCustomer);
        cus.getTypeRoom(typeRoom);
        cus.setTyservice(typeSerice);
        cus.setDiscount(discount);
        cus.setquantityinclued(quantityIncluded);
        cus.setRentaldays(numberOfRentalDays);
        listcustomer.push(cus);

        alert("you have successfully added.");
        dispalayMainMenu();
    }
    dispalayMainMenu();
</script>
</body>
</html>